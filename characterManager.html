<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Character Sheet</title>
    <link href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style type="text/css">
      .stats input[type='text']{
        text-align: center;
      }
      .stats label {
        width: 100%;
        text-align: center;
      }
      .stats p {
        width: 100%;
        text-align: center;
      }
      .table-skills th:first-child {
        width: 100%;
      }
      .table-skills td {
        text-align: center;
      }
      .table-skills td:first-child {
        text-align: left;
      }
      .table-skills td input[type='text'] {
        text-align: center;
      }
      .table-weapons th:first-child {
        width: 100%;
      }
      .table-weapons td {
        text-align: center;
      }
      .table-weapons td:first-child {
        text-align: left;
      }
      .benefits ul {
        padding-left: 16px;
      }
    </style>
  </head>
  <body>
    <div class="navbar navbar-inverse navbar-static-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Project name</a>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
    <div class="container" data-bind="with: model">
      <div class="row">
        <div class="col-md-12">
          <div class="panel panel-default">
            <div class="panel-body">
              <div class="row">
                <div class="col-md-4">
                  <label>Character Name</label>
                  <input type="text" data-bind="value: name" class="form-control input-sm" />
                </div>
              </div>
              <div class="row">
                <div class="col-md-2 col-sm-4 col-xs-6">
                  <label>Race</label>
                  <select type="text" data-bind="options: $parent.availableRaces, optionsText: 'name', value: race" class="form-control input-sm" ></select>
                </div>
                <div class="col-md-2 col-sm-4 col-xs-6">
                  <label>Archetype</label>
                  <select type="text" data-bind="options: race().availableArchetypes, value: archetype" class="form-control input-sm" ></select>
                </div>
                <div class="col-md-8 col-sm-12 col-xs-12">
                  <label>Careers</label>
                    <div>
                      <!-- ko foreach: careers -->
                      <button type="button" class="btn btn-info btn-sm"  data-bind="click: $root.removeCareer">
                        &times;
                        <!-- ko text: name --><!-- /ko -->
                      </button>
                      <!-- /ko -->
                    <div class="btn-group">
                      <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown">
                        Add <span class="caret"></span>
                      </button>
                      <ul class="dropdown-menu" role="menu" data-bind="foreach: $root.availableCareers">
                          <li><a href="#" data-bind="click: $root.addCareer, text: name"></a></li>
                      </ul>
                    </div><!-- /btn-group -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4">
          <div class="panel panel-default" data-bind="with: stats">
            <div class="panel-heading"><h3 class="panel-title">Stats</h3></div>
            <div class="panel-body stats">
              <div class="row">
                <div class="col-xs-4">
                  <label>PHY</label>
                  <input type="text" data-bind="value: phy" class="form-control input-sm" />
                </div>
                <div class="col-xs-4">
                  <label>SPD</label>
                  <input type="text" data-bind="value: spd" class="form-control input-sm" />
                </div>
                <div class="col-xs-4">
                  <label>STR</label>
                  <input type="text" data-bind="value: str" class="form-control input-sm" />
                </div>
              </div>
              <div class="row">
                <div class="col-xs-4">
                  <label>AGL</label>
                  <input type="text" data-bind="value: agl" class="form-control input-sm" />
                </div>
                <div class="col-xs-4">
                  <label>PRW</label>
                  <input type="text" data-bind="value: prw" class="form-control input-sm" />
                </div>
                <div class="col-xs-4">
                  <label>POI</label>
                  <input type="text" data-bind="value: poi" class="form-control input-sm" />
                </div>
              </div>
              <div class="row">
                <div class="col-xs-4">
                  <label>INT</label>
                  <input type="text" data-bind="value: int" class="form-control input-sm" />
                </div>
                <div class="col-xs-4">
                  <label>ARC</label>
                  <input type="text" data-bind="value: arc" class="form-control input-sm" />
                </div>
                <div class="col-xs-4">
                  <label>PER</label>
                  <input type="text" data-bind="value: per" class="form-control input-sm" />
                </div>
              </div>
              <div class="row">
                <div class="col-xs-12">
                  <label>WILLPOWER</label>
                  <p data-bind="text: willpower" class="form-control-static input-sm" />
                </div>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading"><h3 class="panel-title">Combat Stats</h3></div>
            <div class="panel-body">
              <label>DEF</label>
              <div data-bind="text: def" class=" input-sm">
              </div>
              <label>ARM</label>
              <div data-bind="text: arm" class=" input-sm"></div>
              <label>Initiative</label>
              <div data-bind="text: initiative" class=" input-sm"></div>
              <label>Command Range</label>
              <div></div>
            </div>
          </div>
        </div>
        <div class="col-sm-4">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title ">Weapons</h3>
            </div>
            <div class="panel-body">
              <label>Ranged Weapons</label>
              <div class="btn-group">
                <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown">
                  Add <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu" data-bind="foreach: $root.availableRangedWeapons">
                    <li><a href="#" data-bind="click: $root.addRangedWeapon, text: name"></a></li>
                </ul>
              </div>
              <table class="table table-condensed table-weapons">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>RNG</th>
                    <th>RAT</th>
                    <th>POW</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody data-bind="foreach: rangedWeapons">
                  <tr>
                    <td data-bind="text: name"></td>
                    <td data-bind="text: range"></td>
                    <td data-bind="text: parseInt($root.getSkillLevel($data.skill)) + parseInt(attackModifier)"></td>
                    <td data-bind="text: pow"></td>
                    <td>
                      <button type="button" class="close" aria-hidden="true" data-bind="click: $root.removeRangedWeapon">&times;</button>
                    </td>
                  </tr>
                </tbody>
              </table>
              <label>Melee Weapons</label>
              <div class="btn-group">
                <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown">
                  Add <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu" data-bind="foreach: $root.availableMeleeWeapons">
                    <li><a href="#" data-bind="click: $root.addMeleeWeapon, text: name"></a></li>
                </ul>
              </div>
              <table class="table table-condensed table-weapons">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>MAT</th>
                    <th>P+S</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody data-bind="foreach: meleeWeapons">
                  <tr>
                    <td data-bind="text: name"></td>
                    <td data-bind="text: parseInt($root.getSkillLevel($data.skill))+ parseInt(attackModifier)"></td>
                    <td data-bind="text: parseInt(pow) + parseInt($parent.stats.str())"></td>
                    <td>
                      <button type="button" class="close" aria-hidden="true" data-bind="click: $root.removeMeleeWeapon">&times;</button>
                    </td>
                  </tr>
                </tbody>
              </table>
              <label>Additional Weapon</label>
              <div></div>
            </div>
          </div>
        </div>
        <div class="col-sm-4">
          <div class="panel panel-default">
            <div class="panel-heading"><h3 class="panel-title">Skills</h3></div>
            <div class="panel-body">
              <table class="table table-condensed table-skills">
                <thead>
                  <tr>
                    <th>Skill</th>
                    <th>Stat</th>
                    <th>Level</th>
                    <th>Total</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody data-bind="foreach: militarySkills">
                  <tr>
                    <td data-bind="text: name + ' (' + stat.toUpperCase() + ')'"></td>
                    <td data-bind="text: $parent.stats[$data.stat]()"></td>
                    <td><input data-bind="value: level" class="form-control"/></td>
                    <td data-bind="text: parseInt($parent.stats[$data.stat]()) + parseInt(level())"></td>
                    <td>
                      <button type="button" class="close" aria-hidden="true" data-bind="click: $root.removeSkill">&times;</button>
                    </td>
                  </tr>
                </tbody>
                <tbody data-bind="foreach: occupationalSkills">
                  <tr>
                    <td data-bind="text: name + ' (' + stat.toUpperCase() + ')'"></td>
                    <td data-bind="text: $parent.stats[$data.stat]()"></td>
                    <td><input data-bind="value: level" class="form-control"/></td>
                    <td data-bind="text: parseInt($parent.stats[$data.stat]()) + parseInt(level())"></td>
                    <td>
                      <button type="button" class="close" aria-hidden="true" data-bind="click: $root.removeSkill">&times;</button>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div class="btn-group">
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                  Add Skill <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                  <li role="presentation" class="dropdown-header">Military Skills</li>
                  <!-- ko foreach: $root.availableMilitarySkills -->
                    <li><a href="#" data-bind="click: $root.addSkill, text: name"></a></li>
                  <!-- /ko -->
                  <li role="presentation" class="dropdown-header">Occupational Skills</li>
                  <!-- ko foreach: $root.availableOccupationalSkills -->
                    <li><a href="#" data-bind="click: $root.addSkill, text: name"></a></li>
                  <!-- /ko -->
                </ul>
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading"><h3 class="panel-title">Damage Capacity</h3></div>
            <div class="panel-body">
              123
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading"><h3 class="panel-title">Benefits & Abilities</h3></div>
            <div class="panel-body benefits">
              <div class="btn-group">
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                  Add Ability <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                  <!-- ko foreach: $root.combinedAvailableAbilities -->
                    <li><a href="#" data-bind="click: $root.addAbility, text: name"></a></li>
                  <!-- /ko -->
                </ul>
              </div>
              <ul data-bind="foreach: abilities">
                <li>
                  <strong data-bind="text: name"></strong>
                  &nbsp;-&nbsp;
                  <span data-bind="text: description"></span>
                </li>
              </ul>
              <!-- ko foreach: rangedWeaponsWithSpecial -->
              <strong data-bind="text: name"></strong>
              <ul data-bind="foreach: specialQualities">
                <li>
                  <strong data-bind="text: name"></strong>
                  <!-- ko if: (description || '') != '' -->
                  &nbsp;-&nbsp;
                  <!-- /ko -->
                  <span data-bind="text: description"></span>
                </li>
              </ul>
              <!-- /ko -->
              <!-- ko foreach: meleeWeaponsWithSpecial -->
              <strong data-bind="text: name"></strong>
              <ul data-bind="foreach: specialQualities">
                <li>
                  <strong data-bind="text: name"></strong>
                  <!-- ko if: (description || '') != '' -->
                  &nbsp;-&nbsp;
                  <!-- /ko -->
                  <span data-bind="text: description"></span>
                </li>
              </ul>
              <!-- /ko -->
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="https://ajax.aspnetcdn.com/ajax/knockout/knockout-3.1.0.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout.mapping/2.4.1/knockout.mapping.min.js"></script>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function() {
        function CharacterModel() {
          return {
            name: '',
            sex: '',
            archetype: '',
            race: {
              name: 'Human',
              availableArchetypes: [
                'Gifted',
                'Intellectual',
                'Mighty',
                'Skilled'
              ]
            },
            careers: [],
            stats: {
              phy: 1,
              spd: 1,
              str: 1,
              agl: 1,
              prw: 1,
              poi: 1,
              int: 1,
              arc: 0,
              per: 1
            },
            abilities: [],
            skills: [
              {
                name: 'Detection',
                stat: 'agl',
                type: 'occupational',
                level: 2
              },
              {
                name: 'Rifle',
                stat: 'poi',
                type: 'military',
                level: 2
              },
              {
                name: 'Hand Weapon',
                stat: 'prw',
                type: 'military',
                level: 2
              }
            ],
            meleeWeapons: [
            {
                name: 'Sword',
                skill: 'Hand Weapon',
                pow: 3,
                attackModifier: 0,
                specialQualities: []
              },
            ],
            rangedWeapons: [
              {
                name: 'Rifle',
                skill: 'Rifle',
                range: 10,
                pow: 10,
                attackModifier: 0,
                specialQualities: []
              },
              {
                name: 'Scattergun',
                skill: 'Rifle',
                range: 'SP 8',
                pow: 11,
                attackModifier: -2,
                specialQualities: []
              }
            ],
            armor: {
              name: 'Tailored Plate',
              armor: 7,
              speedPenalty: 0,
              defPenalty: -2
            },
          };
        }
        function CharacterViewModel(model) {
          var self = this;
          self.availableArchetypes = ko.observableArray([]);
          self.availableRaces = ko.observableArray([]);
          self.availableSkills = ko.observableArray([]);
          self.availableCareers = ko.observableArray([]);
          self.availableAbilities = ko.observableArray([]);
          self.availableMilitarySkills = ko.computed(function() {
            return $.grep(self.availableSkills(), function(skill) { return skill.type == 'military' && !self.hasSkill(skill); });
          });
          self.availableOccupationalSkills = ko.computed(function() {
            return $.grep(self.availableSkills(), function(skill) { return skill.type == 'occupational' && !self.hasSkill(skill); });
          });
          self.availableMeleeWeapons = ko.observableArray([]);
          self.availableRangedWeapons = ko.observableArray([]);
          self.model = ko.mapping.fromJS(model, { 
            armor: { create: function(options) { return ko.observable(options.data); } },
            race: { create: function(options) { return ko.observable(options.data); } },
            skills: { 
              create: function(options) { 
                var vm = ko.mapping.fromJS(options.data, { observe: ['level'] });
                return vm;
              } 
            },
            meleeWeapons: { 
              create: function(options) { 
                var vm = ko.mapping.fromJS(options.data, { observe: ['specialQualities'] });
                return vm;
              } 
            },
            rangedWeapons: { 
              create: function(options) { 
                var vm = ko.mapping.fromJS(options.data, { observe: ['specialQualities'] });
                return vm;
              } 
            }
          });
          self.model.stats.willpower = ko.computed(function() {
            return self.model.stats.phy() + self.model.stats.int();
          });
          self.model.def = ko.computed(function() {
            var def = parseInt(self.model.stats.spd()) + parseInt(self.model.stats.agl()) + parseInt(self.model.stats.per());
            
            if(self.model.race() && self.model.race().defModifier) 
              def += self.model.race().defModifier;
            if(self.model.armor && self.model.armor)
              def += self.model.armor().defPenalty;
            
            return def;
          });
          self.model.arm = ko.computed(function() {
            var arm = parseInt(self.model.stats.phy());
            if(self.model.armor && self.model.armor())
              arm += self.model.armor().armor;
            return arm;
          });
          self.model.initiative = ko.computed(function() {
            return parseInt(self.model.stats.spd()) + parseInt(self.model.stats.prw()) + parseInt(self.model.stats.per());
          });
          self.model.rangedWeaponsWithSpecial = ko.computed(function() {
            return $.grep(self.model.rangedWeapons(), function(w) { return w.specialQualities().length > 0; });
          });
          self.model.meleeWeaponsWithSpecial = ko.computed(function() {
            return $.grep(self.model.meleeWeapons(), function(w) { return w.specialQualities().length > 0; });
          });
          self.model.militarySkills = ko.computed(function() {
            return $.grep(self.model.skills(), function(skill) { return skill.type == 'military'; });
          });
          self.model.occupationalSkills = ko.computed(function() {
            return $.grep(self.model.skills(), function(skill) { return skill.type == 'occupational'; });
          });
          self.combinedAvailableAbilities = ko.computed(function() {
            var abilities = [];
            for(var i = 0; i < self.model.careers().length; ++i) {
              var career = self.model.careers()[i];
              for(var j = 0; j < career.availableAbilities.length; ++j) {
                var ability = career.availableAbilities[j];
                if(abilities.indexOf(ability) == -1)
                  abilities.push(ability);
              }
            }
            return $.map(abilities, function(ability) { return $.grep(self.availableAbilities(), function(abl) {return abl.name == ability;})[0]; });
          });
          self.addCareer = function(career) {
            self.model.careers.push(career);
          };
          self.removeCareer = function(career) {
            self.model.careers.remove(career);
          };
          self.addAbility = function(ability) {
            self.model.abilities.push(ability);
          };
          self.removeAbility = function(ability) {
            self.model.abilities.remove(ability);
          };
          self.getSkillLevel = function(skillName) {
            var level = 0;
            $.each(self.model.skills(), function(i, skill) {
              if(skill.name == skillName) {
                level = parseInt(skill.level()) + parseInt(self.model.stats[skill.stat]());
                return false;
              }
            });
            return level;
          }
          self.hasSkill = function(skill) {
            return $.grep(self.model.skills(), function(s) { return s.name == skill.name; }).length > 0;
          }
          self.addSkill = function(skill) {
              var vm = { name: skill.name, stat: skill.stat, level: ko.observable(1) };
              self.model.skills.push(vm);
          };
          self.removeSkill = function(skill) {
            self.model.skills.remove(skill);
          };
          self.addMeleeWeapon = function(weapon) {
              var vm = ko.mapping.fromJS(weapon, { observe: ['specialQualities'] });
              self.model.meleeWeapons.push(vm);
          };
          self.removeMeleeWeapon = function(weapon) {
            self.model.meleeWeapons.remove(weapon);
          };
          self.addRangedWeapon = function(weapon) {
              var vm = ko.mapping.fromJS(weapon, { observe: ['specialQualities'] });
              self.model.rangedWeapons.push(vm);
          };
          self.removeRangedWeapon = function(weapon) {
            self.model.rangedWeapons.remove(weapon);
          };
          self.output = function() {
            var modelString = JSON.stringify(ko.mapping.toJS(self.model));
            alert(modelString);
          }
          /*
          $.get('./skills.json', function(skills) {
              self.availableSkills(skills);
          });
          $.get('./meleeWeapons.json', function(skills) {
              self.availableSkills(skills);
          });
          $.get('./rangedWeapons.json', function(skills) {
              self.availableSkills(skills);
          });
          */
          self.availableAbilities([
            {
              name: 'Bomber',
              requiredSkill: { name: 'Thrown Weapon', level: 3 },
              description: "When this character's grenade ranged attack deviates, you can reroll the direction and/or distance of deviation. A roll can only be rerolled once as a result of Bomber."
            },
            {
              name: 'Brew Master',
              requiredSkill: { name: 'Alchemy', level: 2 },
              description: 'The character can reroll failed Alchemy rolls. Each failed roll can be rerolled only once as a result of Brew Master.'
            },
            {
              name: 'Fast Cook',
              requiredSkill: { name: 'Alchemy', level: 2 },
              description: 'The character has learned a number of time-saving shortcuts in the art of brewing potions and mixing alchemical substances. He can create alchemical items in half the normal time.'
            },
            {
              name: 'Field Alchemist',
              requiredSkill: { name: 'Alchemy', level: 1 },
              description: 'The character gains an additional quick action each turn that can be used only to create a field alchemy quick effect.'
            },
            {
              name: 'Fire in the Hole!',
              requiredSkill: { name: 'Thrown Weapon', level: 1 },
              description: "This character can make a grenade attack at the start of the Action Phase of his turn before moving or making his normal attacks. A character making a Fire in the Hole! attack must use his novement that turn to run or make a full advance."
            },
            {
              name: 'Free Style',
              requiredSkill: { name: 'Alchemy', level: 1 },
              description: "The character can improvise the ingredients in his alchcmical compounds. This allows the character to attempt to make do without a specific ingredient. This requiles an Alchemy skill with a target number equal to 10 plus the gc value of the ingredient. This ability also allows the character to get by with less expensive versions of common alchemical ingredients, reducing the cost of his alchemical compounds by 1 gc each (to a minimum of 1 gc). Alchemical compounds brewed using this skill vary slightly in appearance or physical quality from items created by following time-tested recipes."
            },
            {
              name: 'Grenadier',
              requiredSkill: { name: 'Thrown Weapon', level: 1 },
              description: "The character gains an additional quick action each turn that can be nsed onlv to pr-rll the pin on a grenade."
            },
            {
              name: 'Poison Resistance',
              description: "The character gains boosted rolls to resist poisons and toxins."
            }
          ]);
          self.availableSkills([
            {
              name: 'Detection',
              stat: 'agl',
              type: 'occupational'
            },
            {
              name: 'Rifle',
              stat: 'poi',
              type: 'military'
            },
            {
              name: 'Hand Weapon',
              stat: 'prw',
              type: 'military'
            },
            {
              name: 'Great Weapon',
              stat: 'prw',
              type: 'military'
            }
          ]);
          self.availableCareers([
            {
              name: 'Alchemist',
              availableAbilities: [
                'Bomber',
                'Brew Master',
                'Fast Cook',
                'Field Alchemist',
                'Fire in the Hole!',
                'Free Style',
                'Grenadier',
                'Poison Resistance'
              ]
            },
            {
              name: 'Arcane Mechanik',
              requiredArchetype: 'Gifted',
              availableAbilities: [
                "'Jack Marshal",
                'Ace Commander',
                'Arcane Engineer',
                'Drive: Assault',
                'Drive: Pronto',
                'Inscribe Formulae',
                'Resourceful',
                'Steamo'
              ]
            },
            {
              name: 'Arcanist',
              requiredArchetype: 'Gifted'
            },
            {
              name: 'Aristocrat',
              requiredRace: 'Human',
              startingCareerOnly: true
            }
          ]);
          self.availableRangedWeapons([
            {
                name: 'Rifle',
                skill: 'Rifle',
                range: 8,
                pow: 10,
                attackModifier: 0,
                specialQualities: []
              },
              {
                name: 'Scattergun',
                skill: 'Rifle',
                range: 'SP 8',
                pow: 11,
                attackModifier: -2,
                specialQualities: []
              }
          ]);
          self.availableMeleeWeapons([
            {
              name: 'Sword',
              skill: 'Hand Weapon',
              pow: 3,
              attackModifier: 0,
              specialQualities: []
            },
            {
              name: 'Spear',
              skill: 'Great Weapon',
              pow: 3,
              attackModifier: 0,
              specialQualities: [ 
                { name: 'Reach', description: '' },
                { name: 'Set Defense', description: 'Enemy models suffer -2 to charge attack and power attack rolls against this model if the attacker is in the front arc of this model' }
              ]
            }
          ]);
          self.availableRaces([
            {
              name: 'Human',
              availableArchetypes: [
                'Gifted',
                'Intellectual',
                'Mighty',
                'Skilled'
              ]
            },
            {
              name: 'Dwarf',
              availableArchetypes: [
                'Gifted',
                'Intellectual',
                'Mighty',
                'Skilled'
              ]
            },
            {
              name: 'Gobber',
              availableArchetypes: [
                'Intellectual',
                'Mighty',
                'Skilled'
              ]
            },
            {
              name: 'Iosan',
              availableArchetypes: [
                'Gifted',
                'Intellectual',
                'Mighty',
                'Skilled'
              ]
            },
            {
              name: 'Nyss',
              availableArchetypes: [
                'Gifted',
                'Mighty',
                'Skilled'
              ]
            },
            {
              name: 'Ogrun',
              availableArchetypes: [
                'Mighty',
                'Skilled'
              ]
            },
            {
              name: 'Trollkin',
              availableArchetypes: [
                'Gifted',
                'Mighty',
                'Skilled'
              ]
            },
          ]);
        }
        var vm = new CharacterViewModel(new CharacterModel());
        ko.applyBindings(vm);
        $('.dropdown-toggle').dropdown();   
      });
    </script>
  </body>
</html>